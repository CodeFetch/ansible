server {
        listen 80{% if item.default_site is defined and item.default_site %} default_server{% endif %};
        listen [::]:80{% if item.default_site is defined and item.default_site %} default_server{% endif %};

{% if item.tls is defined and item.tls == true %}
        listen 443 ssl{% if item.default_site is defined and item.default_site %} default_server{% endif %};
        listen [::]:443 ssl{% if item.default_site is defined and item.default_site %} default_server{% endif %};
        # TODO certs
{% endif %}

        root {{item.root}};

        index index.php index.html index.htm index.nginx-debian.html;

        server_name _;

        location ~ \.php$ {
                fastcgi_pass unix:/run/php5-fpm.sock;
                fastcgi_index index.php;
                include fastcgi.conf;
        }
}
